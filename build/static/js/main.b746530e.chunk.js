(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/noImage.83cf9178.png"},23:function(e,t,a){e.exports=a(39)},28:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),c=a.n(r),l=a(8),s=a(9),i=a(11),u=a(10),h=a(12),m=a(15),f="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var d={Accept:"application/json",Authorization:b},k=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(m.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=(a(28),a(6)),p=function(e){var t=e.book,a=e.books,n=e.changeShelf,r="none",c=!0,l=!1,s=void 0;try{for(var i,u=a[Symbol.iterator]();!(c=(i=u.next()).done);c=!0){var h=i.value;if(h.id===t.id){r=h.shelf;break}}}catch(m){l=!0,s=m}finally{try{c||null==u.return||u.return()}finally{if(l)throw s}}return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(e){var a=e.target.value;k(t,a).then(function(e){n(t,a)})},defaultValue:r},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))},g=a(20),y=a.n(g),S=function(e){var t=e.book,a=e.books,n=e.changeShelf,r=t.title?t.title:"No title available",c=t.authors?t.authors[0]:"",l=t.imageLinks&&t.imageLinks.thumbnail?t.imageLinks.thumbnail:y.a;return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(l,")")}}),o.a.createElement(p,{book:t,books:a,changeShelf:n}))),o.a.createElement("div",{className:"book-title"},r),o.a.createElement("div",{className:"book-authors"},c))},N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getBooks=function(e){var t=e.target.value;a.setState({query:t}),t?v(t.trim(),20).then(function(e){e.length>0?a.setState({searchResults:e,searchError:!1}):a.setState({searchResults:[],searchError:!0})}):a.setState({searchResults:[],searchError:!1})},a.state={query:"",searchResults:[],searchError:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.query,a=e.searchResults,n=e.searchError,r=this.props,c=r.books,l=r.changeShelf;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(E.b,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{value:t,onChange:this.getBooks,type:"text",placeholder:"Search by title or author"}))),o.a.createElement("div",{className:"search-books-results"},a.length>0&&o.a.createElement("div",null,o.a.createElement("h3",null,"Search returned ",a.length," books: "),o.a.createElement("ol",{className:"books-grid"},a.map(function(e){return o.a.createElement(S,{key:e.id,book:e,books:c,changeShelf:l})}))),n&&o.a.createElement("h3",null,"Sorry, nothing came up in the search.")))}}]),t}(n.Component),j=a(5),O=function(e){var t=e.books,a=e.changeShelf;return o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.map(function(e){return o.a.createElement(S,{key:e.id,book:e,books:t,changeShelf:a})})))},R=function(e){var t=e.books,a=e.changeShelf;return o.a.createElement("div",null,[{type:"currentlyReading",title:"Currently Reading"},{type:"wantToRead",title:"Want to Read"},{type:"read",title:"Read"}].map(function(e,n){var r=t.filter(function(t){return t.shelf===e.type});return o.a.createElement("div",{key:n,className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"".concat(e.title)),o.a.createElement(O,{key:n,books:r,changeShelf:a}))}))},w=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).changeShelf=function(t,a){k(t,a).then(function(n){t.shelf=a,e.setState(function(e){return{books:e.books.filter(function(e){return e.id!==t.id}).concat(t)}})})},e.state={books:[]},e}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(f,"/books"),{headers:d}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){return e.setState({books:t})})}},{key:"render",value:function(){var e=this,t=this.state.books;return o.a.createElement("div",{className:"app"},o.a.createElement(j.a,{path:"/search",render:function(){return o.a.createElement(N,{books:t,changeShelf:e.changeShelf})}}),o.a.createElement(j.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"My Bookshelf")),o.a.createElement("div",{className:"list-books-content"},t.length>0&&o.a.createElement(R,{books:t,changeShelf:e.changeShelf})),o.a.createElement("div",{className:"open-search"},o.a.createElement(E.b,{to:"/search"})))}}))}}]),t}(n.Component);a(38);c.a.render(o.a.createElement(E.a,null,o.a.createElement(w,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.b746530e.chunk.js.map